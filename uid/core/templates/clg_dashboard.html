<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>

  <body>
    <nav class="navbar navbar-expand-md bg-secondary">
      <div class="container-xl">
        <a href="#intro" class="navbar-brand">
          <span class="fw-bold text-light"> College </span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#main-nav"
          aria-controls="main-nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end align-center"
          id="main-nav"
        >
          <ul class="navbar-nav">
            <li class="nav-item text-end mx-2">
              <a href="#" class="nav-link text-light">College_Name</a>
            </li>
            <li class="nav-item text-end mx-2">
              <a href="#" class="nav-link text-light">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-sm">
      <div>
        xyz
        <br />
        xyz
        <br />
        xyz
        <br />
        xyz
      </div>
      <div class="row d-flex justify-content-evenly">
        <!-- Button trigger upload data -->
        {% comment %} <a type="button" class="btn btn-primary col-3" data-bs-toggle="modal" href="{% url 'upload_students_data' %}"> Upload Data by CSV </a> {% endcomment %}

        
        <button
          type="button"
          class="btn btn-primary col-3"
          data-bs-toggle="modal"
          data-bs-target="#upload_data"
        >
          Upload Data by CSV
        </button>

        <!-- Button trigger Add Student -->
        {% comment %} <button
          type="button"
          class="btn btn-primary col-3"
          data-bs-toggle="modal"
          data-bs-target="#add_student"
        >
          Add Student
        </button> {% endcomment %}
        <a type="button" class="btn btn-primary col-3" data-bs-toggle="modal" href="{% url 'upload_students_data' %}"> Add Student </a>


        <!-- Button trigger View/Edit Student data -->
        <a
          type="button"
          class="btn btn-primary col-3"
          href="/College/stud_data.html"
        >
          View/Edit Student data
        </a>
      </div>
    </div>




    <!-- Modal upload_data -->
    <form method="POST" enctype="multipart/form-data" class="csv_data" action = "{% url 'upload_students_data'%}">
      {% csrf_token %}

    <div
      class="modal fade"
      id="upload_data"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>

          <div class="modal-body">

            <label for="formFile" class="form-label ps-1">Select a CSV file to upload student data</label>

            <input  name="student_data" class="form-control" type="file" id="formFile" />
            
          </div>

          <div class="modal-footer">

            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

            <input type="Submit" name="submit_data" class="btn btn-primary">
            
          </div>

        </div>
      </div>
    </div>

  </form>


    <!-- Modal Add Student -->
    <div
      class="modal fade"
      id="add_student"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      tabindex="-1"
      aria-labelledby="staticBackdropLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form class="container">
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputName" class="form-label">Name</label>
                </div>
                <div class="col-9">
                  <input id="student-name" type="Name" class="form-control" />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputAge" class="form-label">Age</label>
                </div>
                <div class="col-9">
                  <input type="Age" id="student-age" class="form-control" />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputGrNumber" class="form-label"
                    >GR. Number</label
                  >
                </div>
                <div class="col-9">
                  <input type="GrNumber" id="student-gr" class="form-control" />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputAddhar" class="form-label"
                    >Addhar Number</label
                  >
                </div>
                <div class="col-9">
                  <input
                    type="Addhar"
                    id="student-aadhar"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputAddress" class="form-label"
                    >Address</label
                  >
                </div>
                <div class="col-9">
                  <input
                    type="Address"
                    id="student-address"
                    class="form-control"
                  />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputGender" class="form-label"
                    >Gender</label
                  >
                </div>
                <div class="col-9">
                  <input
                    type="Gender"
                    list="GenderOptions"
                    id="student-gender"
                    class="form-control"
                    placeholder="Select..."
                  />
                  <datalist id="GenderOptions">
                    <option value="Male"></option>
                    <option value="Female"></option>
                    <option value="Others"></option>
                  </datalist>
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputDate" class="form-label"
                    >Date Of Birth</label
                  >
                </div>
                <div class="col-9">
                  <input
                    role="button"
                    type="Date"
                    id="student-dob"
                    class="form-control"
                    id="exampleInputDate"
                  />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputEmail" class="form-label"
                    >Email</label
                  >
                </div>
                <div class="col-9">
                  <input
                    type="Email"
                    id="student-email"
                    class="form-control"
                    id="exampleInputEmail"
                  />
                </div>
              </div>
              <div class="mb-3 row">
                <div class="col-3">
                  <label for="exampleInputNumber" class="form-label"
                    >Phone Number</label
                  >
                </div>
                <div class="col-9">
                  <input type="Text" id="student-number" class="form-control" />
                </div>
              </div>
              <div class="mb-4"></div>
              <div class="mb-3 form-check">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="exampleCheck1"
                />
                <label class="form-check-label" for="exampleCheck1"
                  >I Confirm All the Data is True as per my Knowledge</label
                >
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="button"
              id="add-student-button"
              onclick="studentAddForm()"
              class="btn btn-primary"
            >
              Add Student
            </button>
          </div>
        </div>
      </div>
    </div>

    {% comment %} <script>
      const url = "dummy.json";
      var studentsData;
      var studentList = "";

      fetch(url)
        .then((response) => {
          return response.json();
        })
        .then((data) => {
          studentsData = data;

          data.forEach((student) => {
            var individualData = `<tr>\n
                <th scope="row">${student["name"]}</th>\n
                <td>${student["gr_no"]}</td>\n
                <td>${student["gender"]}</td>\n
                <td>${student["DOB"]}</td>\n
                <td><a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Edit</a></td>\n
              </tr>\n`;
            studentList = studentList.concat(individualData);
          });

          console.log(studentsData);

          $("#student-list").html(studentList);
        })
        .catch((error) => `${error}`);

      function addStudentFunc(studentData) {
        var studentName = $("#student-name").val();
        var studentGR = $("#student-gr").val();
        var studentAadhar = $("#student-aadhar").val();
        var studentAddress = $("#student-address").val();
        var studentClgName = $("#student-clg-name").val();
        var studentGender = $("#student-gender").val();
        var studentDOB = $("#student-dob").val();
        var studentEmail = $("#student-email").val();
        var studentNumber = $("#student-number").val();

        var newStudent = {
          name: studentName,
          gr_no: studentGR,
          gender: studentGender,
          DOB: studentDOB,
          verified_Docs: {},
        };

        // studentData below is a template to output to HTML

        var studentData = `<tr>\n
                <th scope="row">${newStudent["name"]}</th>\n
                <td>${newStudent["gr_no"]}</td>\n
                <td>${newStudent["gender"]}</td>\n
                <td>${newStudent["DOB"]}</td>\n
                <td><a type="button" data-bs-toggle="modal" data-bs-target="#exampleModal">Edit</a></td>\n
              </tr>\n`;
        studentList = studentList.concat(studentData);
        $("#student-list").html(studentList);
      }

      function studentAddForm() {
        addStudentFunc(studentsData);
      }
    </script> {% endcomment %}

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
